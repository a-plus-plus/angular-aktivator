<div ng-controller="SurveyCtrl" ng-init="">
	<h1>Surveys</h1>
	<div ng-repeat="survey in surveys">
		<h3>Survey {{$index+1}}: {{survey.title}}, Status: {{$survey.status}}</h3>
		<ul>
			<div ng-repeat="question in survey.questions">
				<li>Question {{$index+1}}: {{question.title}}</li>
				<ul>
					<div ng-repeat="option in question.options">
						<li>Option {{$index+1}}: {{option.value}}</li>
					</div>
				</ul>
			</div>
			<div ng-repeat="question in survey.questions">
				<li>{{question.title}}</li>
				<ul ng-repeat="option in question.options">
					<li>{{option.value}}</li>
				</ul>
			</div>
		</ul>
	</div>


	<h3>New survey</h3>

	<form ng-submit="addSurvey()">
		<fieldset>
			<label for="survey_title">Title:</label>
			<input ng-model="survey.title" type="text" id="survey.title">
			<label for="survey_status">Status:</label>
			<select ng-model="survey.status" id="survey_status">
				<option value="Published">Published</option>
				<option value="Unpublished">Unpublished</option>
				<option value="Finished">Finished</option>
			</select>			
		</fieldset>	
		<div ng-repeat="question in survey.questions" ng-init="outerIndex = $index" style="padding-left:50px">
			<fieldset id = "survey_question_{{outerIndex}}" ng-hide="question.destroy==1" ng-scope>
				<label for="question_title">Question</label><br />
				<textarea ng-model="question.title" id="survey_question_title_{{outerIndex}}"></textarea>
				<label for="question_kind">Kind</label><br />
				<select ng-model="question.kind" id="survey_question_kind_{{outerIndex}}">
					<option value="Radiobutton">Radiobutton</option>
					<option value="Checkbox">Checkbox</option>
					<option value="Textfield">Textfield</option>
				</select>
				<input type="hidden" value="{{question.id}}"/>
				<input type="hidden" value="{{queation.destroy}}"
			</fieldset>
		</div>
		<div class="actions">

			<button ng-click="newQuestion($event)">New Question</button>
		</div>
	</form>
</div>